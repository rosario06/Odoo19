<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Payroll Accounting - Integraci√≥n Contable de N√≥mina | Odoo 19</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; line-height: 1.6; color: #2c3e50; background: #f8f9fa; }
        .container { max-width: 1200px; margin: 0 auto; padding: 20px; }
        .header { background: linear-gradient(135deg, #27ae60 0%, #229954 100%); color: white; padding: 60px 20px; text-align: center; border-radius: 10px; margin-bottom: 30px; box-shadow: 0 10px 30px rgba(0,0,0,0.2); }
        .header h1 { font-size: 3em; margin-bottom: 10px; text-shadow: 2px 2px 4px rgba(0,0,0,0.3); }
        .header .subtitle { font-size: 1.3em; opacity: 0.95; margin-top: 10px; }
        .version-badge { display: inline-block; background: rgba(255,255,255,0.3); padding: 8px 20px; border-radius: 25px; margin-top: 15px; font-weight: bold; backdrop-filter: blur(10px); }
        
        .alert { padding: 20px; margin: 30px 0; border-radius: 10px; border-left: 5px solid; background: white; box-shadow: 0 4px 6px rgba(0,0,0,0.1); }
        .alert-info { border-color: #3498db; background: #ebf5fb; }
        .alert-success { border-color: #27ae60; background: #eafaf1; }
        .alert-warning { border-color: #f39c12; background: #fef5e7; }
        .alert-danger { border-color: #e74c3c; background: #fadbd8; }
        .alert h3 { margin-bottom: 10px; color: inherit; }
        
        .section { background: white; margin: 30px 0; padding: 40px; border-radius: 10px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); }
        .section h2 { color: #27ae60; font-size: 2.2em; margin-bottom: 25px; padding-bottom: 15px; border-bottom: 3px solid #27ae60; }
        .section h3 { color: #229954; font-size: 1.6em; margin-top: 30px; margin-bottom: 15px; }
        .section h4 { color: #555; font-size: 1.3em; margin-top: 20px; margin-bottom: 10px; }
        
        .feature-grid { display: grid; grid-template-columns: repeat(auto-fit, minwidth(300px, 1fr)); gap: 25px; margin: 30px 0; }
        .feature-card { background: linear-gradient(135deg, #27ae6015 0%, #22995415 100%); padding: 25px; border-radius: 10px; border: 2px solid #27ae6030; transition: transform 0.3s, box-shadow 0.3s; }
        .feature-card:hover { transform: translateY(-5px); box-shadow: 0 8px 20px rgba(39,174,96,0.3); }
        .feature-card h4 { color: #27ae60; margin-bottom: 15px; font-size: 1.3em; }
        .feature-card ul { list-style: none; padding-left: 0; }
        .feature-card li { padding: 8px 0 8px 30px; position: relative; }
        .feature-card li:before { content: "‚úì"; position: absolute; left: 0; color: #27ae60; font-weight: bold; font-size: 1.2em; }
        
        .models-table { width: 100%; border-collapse: collapse; margin: 25px 0; overflow: hidden; border-radius: 10px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); }
        .models-table thead { background: linear-gradient(135deg, #27ae60 0%, #229954 100%); color: white; }
        .models-table th, .models-table td { padding: 15px; text-align: left; border-bottom: 1px solid #e0e0e0; }
        .models-table tbody tr:hover { background-color: #f8f9fa; }
        .models-table tbody tr:nth-child(even) { background-color: #f9f9f9; }
        
        .code-block { background: #2d2d2d; color: #f8f8f2; padding: 20px; border-radius: 8px; overflow-x: auto; margin: 20px 0; box-shadow: inset 0 2px 10px rgba(0,0,0,0.3); }
        .code-block pre { margin: 0; font-family: 'Courier New', monospace; font-size: 0.95em; }
        
        .badge { display: inline-block; padding: 6px 14px; border-radius: 20px; font-size: 0.85em; font-weight: bold; margin: 5px 5px 5px 0; }
        .badge-primary { background: #27ae60; color: white; }
        .badge-success { background: #27ae60; color: white; }
        .badge-info { background: #3498db; color: white; }
        .badge-warning { background: #f39c12; color: white; }
        
        .footer { background: #2c3e50; color: white; padding: 40px 20px; text-align: center; margin-top: 50px; border-radius: 10px; }
        .footer a { color: #3498db; text-decoration: none; }
        .footer a:hover { text-decoration: underline; }
        
        @media (max-width: 768px) {
            .header h1 { font-size: 2em; }
            .section { padding: 20px; }
            .feature-grid { grid-template-columns: 1fr; }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <h1>üí∞ Payroll Accounting</h1>
            <p class="subtitle">Integraci√≥n Contable de N√≥mina para Odoo 19</p>
            <div class="version-badge">Versi√≥n 19.0.1.0.4 | Adaptado para Odoo 19</div>
        </div>

        <!-- Alerta de Migraci√≥n -->
        <div class="alert alert-danger">
            <h3>‚ö†Ô∏è M√≥dulo Adaptado a Odoo 19</h3>
            <p><strong>Este m√≥dulo fue migrado desde OCA Payroll Account 18.0 a Odoo 19.</strong></p>
            <p><strong>Cambios importantes realizados:</strong></p>
            <ul style="margin-top: 10px; padding-left: 20px;">
                <li><strong>Referencia hr.contract:</strong> Actualizada para apuntar a hr_payroll.hr_contract_view_form</li>
                <li><strong>XPath de herencia:</strong> Ajustado para coincidir con la nueva estructura de vistas</li>
                <li><strong>Referencias de m√≥dulo:</strong> Actualizadas de 'payroll' a 'hr_payroll'</li>
                <li><strong>Dependencias:</strong> Actualizadas para usar hr_payroll en lugar de payroll</li>
            </ul>
        </div>

        <!-- Alerta de Informaci√≥n -->
        <div class="alert alert-info">
            <h3>üìã M√≥dulo de Integraci√≥n Contable OCA</h3>
            <p><strong>Este m√≥dulo extiende el m√≥dulo Payroll base a√±adiendo integraci√≥n completa con Contabilidad.</strong></p>
            <p>Genera autom√°ticamente asientos contables por cada n√≥mina procesada, permitiendo un control financiero preciso de los costos de personal.</p>
        </div>

        <!-- Caracter√≠sticas Principales -->
        <div class="section">
            <h2>üéØ Caracter√≠sticas Principales</h2>
            <div class="feature-grid">
                <div class="feature-card">
                    <h4>üìä Asientos Contables Autom√°ticos</h4>
                    <ul>
                        <li>Generaci√≥n autom√°tica de asientos</li>
                        <li>Un asiento por n√≥mina</li>
                        <li>Cuentas configurables por regla</li>
                        <li>Multi-diario</li>
                        <li>Fecha configurable</li>
                    </ul>
                </div>

                <div class="feature-card">
                    <h4>üíº Configuraci√≥n en Contratos</h4>
                    <ul>
                        <li>Diario contable por contrato</li>
                        <li>Cuenta anal√≠tica opcional</li>
                        <li>Configuraci√≥n flexible</li>
                        <li>Herencia de configuraci√≥n</li>
                        <li>Validaci√≥n autom√°tica</li>
                    </ul>
                </div>

                <div class="feature-card">
                    <h4>üìê Cuentas por Regla Salarial</h4>
                    <ul>
                        <li>Cuenta de d√©bito por regla</li>
                        <li>Cuenta de cr√©dito por regla</li>
                        <li>Cuenta anal√≠tica por regla</li>
                        <li>Configuraci√≥n detallada</li>
                        <li>M√∫ltiples registros contables</li>
                    </ul>
                </div>

                <div class="feature-card">
                    <h4>üìÖ Gesti√≥n de Fechas Contables</h4>
                    <ul>
                        <li>Fecha contable personalizable</li>
                        <li>Fecha de n√≥mina por defecto</li>
                        <li>Control de per√≠odos contables</li>
                        <li>Validaci√≥n de cierre</li>
                        <li>Trazabilidad completa</li>
                    </ul>
                </div>

                <div class="feature-card">
                    <h4>üîç Trazabilidad y Auditor√≠a</h4>
                    <ul>
                        <li>Enlace directo n√≥mina-asiento</li>
                        <li>Reporte de asientos</li>
                        <li>Historial de modificaciones</li>
                        <li>B√∫squeda avanzada</li>
                        <li>Exportaci√≥n de datos</li>
                    </ul>
                </div>

                <div class="feature-card">
                    <h4>üìà Reportes Contables</h4>
                    <ul>
                        <li>Balance de n√≥mina</li>
                        <li>Detalle por departamento</li>
                        <li>Costos por proyecto (anal√≠tica)</li>
                        <li>Reportes personalizables</li>
                        <li>An√°lisis de costos</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Modelos Extendidos -->
        <div class="section">
            <h2>üóÑÔ∏è Modelos Extendidos por el M√≥dulo</h2>
            <table class="models-table">
                <thead>
                    <tr>
                        <th>Modelo Base</th>
                        <th>Campos A√±adidos</th>
                        <th>Descripci√≥n</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><strong>hr.payslip</strong></td>
                        <td><code>date</code>, <code>journal_id</code>, <code>move_id</code></td>
                        <td>Fecha contable, diario y asiento generado</td>
                    </tr>
                    <tr>
                        <td><strong>hr.contract</strong></td>
                        <td><code>journal_id</code>, <code>analytic_account_id</code></td>
                        <td>Diario y cuenta anal√≠tica por defecto</td>
                    </tr>
                    <tr>
                        <td><strong>hr.salary.rule</strong></td>
                        <td><code>account_debit</code>, <code>account_credit</code>, <code>analytic_account_id</code></td>
                        <td>Cuentas contables y anal√≠ticas para cada regla</td>
                    </tr>
                    <tr>
                        <td><strong>hr.payslip.run</strong></td>
                        <td><code>journal_id</code></td>
                        <td>Diario para el lote completo</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <!-- Flujo de Integraci√≥n Contable -->
        <div class="section">
            <h2>üîÑ Flujo de Integraci√≥n Contable</h2>
            
            <h3>Generaci√≥n de Asientos</h3>
            <ol style="margin: 15px 0 15px 30px; line-height: 2;">
                <li><strong>Configurar Contratos:</strong> Asignar diario contable y cuenta anal√≠tica (opcional)</li>
                <li><strong>Configurar Reglas Salariales:</strong> Definir cuentas de d√©bito y cr√©dito para cada regla</li>
                <li><strong>Generar N√≥mina:</strong> Calcular recibos de n√≥mina normalmente</li>
                <li><strong>Confirmar N√≥mina:</strong> Al confirmar, se genera autom√°ticamente el asiento contable</li>
                <li><strong>Revisar Asiento:</strong> Acceder al asiento desde el campo "move_id" en la n√≥mina</li>
                <li><strong>Publicar Asiento:</strong> El asiento se crea en estado borrador, publicar cuando est√© listo</li>
            </ol>

            <h3>Ejemplo de Asiento Generado</h3>
            <div class="code-block">
                <pre># Asiento contable t√≠pico de n√≥mina:

D√âBITO                           | CR√âDITO
---------------------------------+----------------------------------
Gastos de Personal - Salarios    | Banco - N√≥mina a pagar
Gastos de Personal - Bonos       | ISR por pagar
Gastos de Personal - AFP Patronal| AFP por pagar
Gastos de Personal - ARS Patronal| ARS por pagar
                                 | SFS por pagar

# Todos los movimientos se agrupan en un √∫nico asiento
# con referencia a la n√≥mina original</pre>
            </div>
        </div>

        <!-- Configuraci√≥n de Cuentas -->
        <div class="section">
            <h2>‚öôÔ∏è Configuraci√≥n de Cuentas Contables</h2>
            
            <h3>En Reglas Salariales</h3>
            <p>Para cada regla salarial, puedes definir:</p>
            <ul style="margin: 15px 0 15px 30px;">
                <li><strong>Cuenta de D√©bito:</strong> Cuenta de gasto (ej: Gastos de Personal - Salarios)</li>
                <li><strong>Cuenta de Cr√©dito:</strong> Cuenta de pasivo o banco (ej: Banco - N√≥mina a pagar)</li>
                <li><strong>Cuenta Anal√≠tica:</strong> Para distribuci√≥n de costos por proyecto/departamento</li>
            </ul>

            <h3>Configuraci√≥n Recomendada por Tipo de Regla</h3>
            <table class="models-table">
                <thead>
                    <tr>
                        <th>Tipo de Regla</th>
                        <th>Cuenta de D√©bito</th>
                        <th>Cuenta de Cr√©dito</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><strong>Salario Base</strong></td>
                        <td>Gastos de Personal - Salarios</td>
                        <td>Banco - N√≥mina a pagar</td>
                    </tr>
                    <tr>
                        <td><strong>Bonos</strong></td>
                        <td>Gastos de Personal - Bonos</td>
                        <td>Banco - N√≥mina a pagar</td>
                    </tr>
                    <tr>
                        <td><strong>ISR (Deducci√≥n)</strong></td>
                        <td>Banco - N√≥mina a pagar</td>
                        <td>ISR por pagar</td>
                    </tr>
                    <tr>
                        <td><strong>Seguro Social Patronal</strong></td>
                        <td>Gastos de Personal - Seg. Social</td>
                        <td>TSS/AFP/ARS por pagar</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <!-- Cambios T√©cnicos en Odoo 19 -->
        <div class="section">
            <h2>üîß Cambios T√©cnicos en Odoo 19</h2>
            
            <h3>Referencias Actualizadas</h3>
            <p>Todos los m√≥dulos OCA Payroll usan el prefijo <code>payroll.</code> en sus referencias XML. En Odoo 19, hemos actualizado esto a <code>hr_payroll.</code> para coincidir con el nombre del m√≥dulo.</p>

            <h3>Vista de Contrato Modificada</h3>
            <p>El XPath de herencia en la vista de contrato se ha ajustado:</p>
            <div class="code-block">
                <pre># Antes (Odoo 18):
<xpath expr="//group[@name='top_info_right']" position="after">

# Ahora (Odoo 19):
<xpath expr="//group[@name='salary']" position="inside"></pre>
            </div>
            <p>Esto es debido a que el modelo <code>hr.contract</code> ahora se define directamente en <code>hr_payroll</code> con una estructura de vista simplificada.</p>

            <h3>Dependencias</h3>
            <p>El m√≥dulo ahora depende de:</p>
            <ul style="margin: 15px 0 15px 30px;">
                <li><code>hr_payroll</code> (en lugar de 'payroll')</li>
                <li><code>account</code> (Contabilidad)</li>
            </ul>
        </div>

        <!-- Instalaci√≥n y Configuraci√≥n -->
        <div class="section">
            <h2>üì¶ Instalaci√≥n y Configuraci√≥n</h2>
            
            <h3>Requisitos Previos</h3>
            <div class="alert alert-warning">
                <strong>M√≥dulos requeridos (deben estar instalados antes):</strong>
                <ul style="margin-top: 10px; padding-left: 20px;">
                    <li><strong>hr_payroll</strong> - M√≥dulo base de n√≥mina</li>
                    <li><strong>account</strong> - Contabilidad</li>
                </ul>
            </div>

            <h3>Pasos de Instalaci√≥n</h3>
            <ol style="margin: 15px 0 15px 30px; line-height: 2;">
                <li><strong>Instalar hr_payroll primero:</strong> Este m√≥dulo extiende hr_payroll</li>
                <li>Ir a <strong>Apps</strong> ‚Üí Activar modo desarrollador</li>
                <li>Clic en <strong>"Actualizar lista de apps"</strong></li>
                <li>Buscar <strong>"Payroll Accounting"</strong> o <strong>"hr_payroll_account"</strong></li>
                <li>Clic en <strong>"Instalar"</strong></li>
            </ol>

            <h3>Configuraci√≥n Post-Instalaci√≥n</h3>
            <ol style="margin: 15px 0 15px 30px; line-height: 2;">
                <li><strong>Crear Diarios de N√≥mina:</strong>
                    <br><em>Contabilidad ‚Üí Configuraci√≥n ‚Üí Diarios</em>
                    <br>Tipo: General, C√≥digo: NOM, Nombre: "N√≥mina"
                </li>
                <li><strong>Configurar Plan de Cuentas:</strong>
                    <br>Crear cuentas para: gastos de personal, n√≥mina por pagar, retenciones
                </li>
                <li><strong>Configurar Contratos:</strong>
                    <br>Asignar diario contable y cuenta anal√≠tica a cada contrato
                </li>
                <li><strong>Configurar Reglas Salariales:</strong>
                    <br>Asignar cuentas de d√©bito y cr√©dito a cada regla
                </li>
                <li><strong>Probar con una N√≥mina:</strong>
                    <br>Generar y confirmar una n√≥mina de prueba, verificar el asiento generado
                </li>
            </ol>

            <div class="alert alert-success">
                <h3>‚úÖ Consejo Profesional</h3>
                <p>Usa cuentas anal√≠ticas para distribuir los costos de n√≥mina por departamento o proyecto. Esto te permitir√° generar reportes de costos m√°s detallados.</p>
            </div>
        </div>

        <!-- Badges -->
        <div class="section">
            <h2>üè∑Ô∏è Caracter√≠sticas T√©cnicas</h2>
            <p style="margin-bottom: 20px;">
                <span class="badge badge-primary">OCA Community</span>
                <span class="badge badge-success">Licencia LGPL-3</span>
                <span class="badge badge-info">Odoo 19.0</span>
                <span class="badge badge-warning">Adaptado/Migrado</span>
                <span class="badge badge-primary">Multi-compa√±√≠a</span>
                <span class="badge badge-info">Contabilidad Integrada</span>
            </p>

            <h3>Compatibilidad</h3>
            <ul style="margin: 15px 0 15px 30px;">
                <li><strong>Odoo Version:</strong> 19.0 (migrado desde OCA 18.0)</li>
                <li><strong>Odoo Edition:</strong> Community</li>
                <li><strong>Python:</strong> 3.10 o superior</li>
                <li><strong>M√≥dulo Base:</strong> hr_payroll (versi√≥n 19.0)</li>
            </ul>
        </div>

        <!-- Footer -->
        <div class="footer">
            <h3>Payroll Accounting - Integraci√≥n Contable de N√≥mina</h3>
            <p>Versi√≥n 19.0.1.0.4 | Desarrollado originalmente por Odoo SA</p>
            <p>Mantenido por <strong>OCA - Odoo Community Association</strong></p>
            <p>Adaptado a Odoo 19 por <strong>Juan Rosario</strong></p>
            <p style="margin-top: 20px;">
                <a href="https://github.com/OCA/payroll" target="_blank">GitHub OCA</a> | 
                <a href="https://odoo-community.org" target="_blank">OCA</a> | 
                <a href="mailto:juan.e.rosario05@gmail.com">Soporte Juan Rosario</a>
            </p>
            <p style="margin-top: 20px; font-size: 0.9em; opacity: 0.8;">
                Licencia LGPL-3 | ¬© 2025 Odoo SA & OCA | Adaptaci√≥n ¬© 2025 Juan Rosario
            </p>
        </div>
    </div>
</body>
</html>
